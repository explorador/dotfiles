# ~/.tmux.conf

# ====================
# General Settings
# ====================
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -g mouse on
set -g history-limit 50000
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g set-clipboard on
set -s escape-time 0
set -g focus-events on
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

# ====================
# Prefix Key (Ctrl+Space)
# ====================
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# ====================
# Keybindings
# ====================
# Reload config
bind r source-file ~/.tmux.conf \; display "Config reloaded"

# Split panes
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Windows
bind c new-window -c "#{pane_current_path}"
bind n next-window
bind p previous-window

# Session management
bind w choose-tree -Zs
bind d detach-client

# Toggle zoom
bind z resize-pane -Z

# Copy mode (vim-style)
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# ====================
# Catppuccin + Ayu Mirage Colors
# ====================
set -g status-position top

# Ayu Mirage colors (set before loading Catppuccin)
set -g @thm_bg "#1f2430"
set -g @thm_fg "#cbccc6"

# Surfaces (dark to light)
set -g @thm_crust "#11131a"
set -g @thm_mantle "#171b24"
set -g @thm_surface_0 "#232834"
set -g @thm_surface_1 "#2d3340"
set -g @thm_surface_2 "#3d4455"
set -g @thm_overlay_0 "#4d556a"
set -g @thm_overlay_1 "#5d6580"
set -g @thm_overlay_2 "#707a8c"
set -g @thm_subtext_0 "#8a919d"
set -g @thm_subtext_1 "#a0a6b2"

# Accent colors
set -g @thm_green "#bae67e"
set -g @thm_yellow "#ffcc66"
set -g @thm_blue "#73d0ff"
set -g @thm_lavender "#d4bfff"
set -g @thm_mauve "#d4bfff"
set -g @thm_teal "#95e6cb"
set -g @thm_peach "#ffad66"
set -g @thm_red "#f28779"
set -g @thm_pink "#f28779"
set -g @thm_flamingo "#f28779"
set -g @thm_maroon "#f28779"
set -g @thm_rosewater "#cbccc6"
set -g @thm_sky "#73d0ff"
set -g @thm_sapphire "#73d0ff"

# Catppuccin config
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"
set -g @catppuccin_status_background "#{@thm_bg}"

# Window colors
set -g @catppuccin_window_current_text_color "#{@thm_surface_1}"
set -g @catppuccin_window_current_number_color "#{@thm_yellow}"
set -g @catppuccin_window_text_color "#{@thm_surface_0}"
set -g @catppuccin_window_number_color "#{@thm_overlay_2}"

# Window text (show window name)
set -g @catppuccin_window_text " #W"
set -g @catppuccin_window_current_text " #W"

# Load Catppuccin
run ~/.config/tmux/plugins/catppuccin/catppuccin.tmux

# Pane borders (subtle gray, thicker lines) - after Catppuccin to override its defaults
set -g pane-border-lines heavy
set -g pane-border-style "fg=#{@thm_overlay_1}"
set -g pane-active-border-style "fg=#{@thm_yellow}"

# Pane titles (background matches border color, right-aligned, bold)
set -g pane-border-status top
set -g pane-border-format "#[align=right]#{?pane_active,#[bg=#{@thm_yellow}],#[bg=#{@thm_overlay_1}]}#[fg=#{@thm_bg},bold] #{pane_index} â”‚ #{?#{m:*.local,#{pane_title}},#{pane_current_command},#{pane_title}} #[default]"

# Status modules (after loading Catppuccin)
set -g status-left "#{E:@catppuccin_status_session}"
set -g status-right "#{E:@catppuccin_status_gitmux}"
